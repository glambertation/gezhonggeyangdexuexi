## 精通比特币

* ch4 加密技术
  * 公钥和私钥
    * 有了私钥，我们就可以使用椭圆曲线乘法这个单向加密函数产生一个公钥（K）。有了公钥（K），我们就可以使 用一个单向加密哈希函数生成比特币地址（A）
    * 私钥
      * 随机生成256位私钥/64位16进制
    * 公钥
      * 通过椭圆曲线乘法可以从私钥计算得到公钥，这是不可逆转的过程：K = k * G 
      * 椭圆曲线[https://www.cnblogs.com/qcblog/p/8998045.html]
    * 比特币地址
      * 在交易中，比特币地址通常以收款方出现。如果把比特币交易比作一张支票，比特币地址就是收款人
      * 公钥经过hash（SHA256和RIPEMD160），再进行Base58Check校验编码，生成地址
      * Base58是Base64编码格式的子集，同样使用大小写字母和10个数字，但舍弃了一些容易错 读和在特定字体中容易混淆的字符。
  * 秘钥格式
    * 十六进制和原始的二进制格式用在软件的内部，很少展示给用户看。WIF格式用在钱包之间密钥的输入和输出，也用于代表私钥的二维码（条形码）。
    * 压缩
      * 一个公钥是一个椭圆曲线上的点(x, y)。而椭圆曲线实际是一个数学方程，曲线上的点实际是该方程的一个解
      * 只存储公钥的x坐标，略去y坐标
  * 加密私钥
    * 冷存储
  * 多重地址
    * 虽然任何人都可以将比特币发送到 一个1开头的地址，但比特币只能在通过相应的私钥签名和公钥哈希值后才能消费。
    
    
## btc
 * 比特币系统的底层是一个由多方共同维护，使用密码学保证传输和访问安全，实现数据一致存储、难以篡改、防止抵赖的分布式账本，也称为区块链
 * 中本聪将非对称加密、点对点技术、工作量证明三项关键技术结合在一起，创造了第一个不依赖于中心化机构的点对点电子现金系统，并且在全球大规模部署。
 * 公链
   * 以太坊，eos
 * 私链
   * r3 hyperledger
 * eth 以太坊
   * 了智能合约的概念，用户可编写智能合约的程序并将其部署在区块链上，使得区块链从主要用于记录电子现金转账的“专有账本”，升级为可记录计算状态
（state machine）的“通用账本”，区块链进入可编程时代
   * token
   * 基础设施产业（ 矿机生产、矿池、交易、托管、钱包等
   * 问题 
     * 身份适配
     * 商业适配
     * 数据适配 （但区块链只能保证来自于外部的数据无法篡改，无法保证真实准确。
     * 法律适配 （身份认证问题在法律上将导致责任主体不明，如果利用公有链的合约出现了法律纠纷，无法确立责任主体
 * 技术瓶颈
   * 可扩展性，性能瓶颈 吞吐量；主要是通过发展多样态共识、并行分片方案、二层网络方案及可验证计算来解决和改善
   * 互操作性 不同区块链的互操作，高效链接机制；跨链机制（1、中继/侧链 2、公证人机制 3、哈希锁定）
   * 隐私保护：假名、混币、环签名、Mimblewimble、零知识证明和可信计算解决
   * 安全性： 智能合约安全运行
   * 技术
     * 多样态共识模式 
       * 共识算法用于协调系统中节点的行为和保持数据一致性
       * 共识算法在共识顺序、共识轮次、终局性和节点选择方式等方向的差异，形成多样态发展的态势
       * 例如 PoW 共识效率低，DPoS 去中心化程度较低等，Algorand、DFINITY、VBFT 等都属于混合共识算法
     * 并行分片
       * 区块链系统中每个节点全量处理所有交易，单纯增加节点并不能提升区块链的性能（TPS），反而节点之间达成共识的过程对性能是一个损耗
       * 区块链的分片就是试图让链并行起来，将链分为多个分片链，然后通过一种负载分发机制，把交易分配给不同的分片执行，每个分片链独立运行，有独立的共识机制，通过并行的方案支撑比较强的水平扩展和按需扩展
       * 如何把分片的理论和区块链的安全理论，包括密码经济学设计、激励机制设计，这些融合在一起来实现一个安全可扩展，而且高性能的区块链
         * 网络分片：要求分片的消息只在分片内部网络中传播
         * 交易分片：指不同交易将只在不同的分片中运行，每个分片运行独立的共识算法；
         * 状态分片：要求分片只需要维护分片内部的状态数据而不需要保存其它分片的数据
     * 二层网络
       * 区块链二层网络（Layer2）技术旨在解决区块链扩容问题。区块链本身的容量是受限的，仅靠提高吞吐量很难满足所有的应用需求
       * 实际情况中，不是所有的交易都要在全球范围内达成共识，可以把部分交易以及合约执行只在所需范围内进行共识，以实现扩容的目标。广义的二层网络，
包含了侧链，状态通道等各种将区块链的交易从链上迁移到链下（也可能是别的共识范围更小的链）的技术方案。二层网络设计中，脱离的链上共识的交易与合约如何与链上的共识挂接，保证交易和合约的合法性及安全性是需要解决的问题
         * 证明问题：链上没有全量数据的情况下，链下的交易最终如何给链上提交证明。
         * 裁决和惩罚问题：裁决和执行如何进行以产生链下约束力
         * 监督问题：链下状态的监督
       * 方案
         * 状态通道
         * 多方链下账本托管
         * 侧脸账本
         * 状态账本
     * 隐私性保护 
       * 假名，混币，机密交易，环签名，Mimblewimble，Zero—Knowledge Proof）
   * 可信
     * 一是数据隐私保护
     * 二是可验证计算
     * 可信环境 TEE
     * 同态加密/全同态加密
       * Enc(x)+Enc(y)=Enc(x+y)，就可以说 Enc 对于加法具有同态性。
常见的如 RSA 加密算法和椭圆曲线群都是关于加法同态的
   * 跨链
     * 跨链技术的核心在于让不同的区块链能跨越彼此的障碍，从而在数据和价值的层面进行相互流通
   * 智能合约安全问题
     * 智能合约是一种旨在以信息化方式传播、验证或执行的计算机协议。智能合约允许在没有第三方的情况下进行可信交易，这些交易可追踪且不可逆转。
     * 漏洞类型
       * 编程语言漏洞，基于区块链平台特性的漏洞，业务逻辑的漏洞，合约虚拟机的漏洞
   * 公链治理
     * 一般来说，公有区块链治理生态构成由四种角色组成：区块链协议开发者、矿工、上层应用开发者及用户
       
 
    
